<!DOCTYPE html>
<html>
	<head>
	<title> Hello world </title>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
	</head>
	
	<!-- Input textbox -->
	<p>	<textarea id="exampleTextBox"> Math 10 </textarea> </p>
	
	<!-- Button connected to Input textbox -->
	<button type="button" id="appendToArray"> Add Course </button>
	
	<!-- Current Courses added -->
	<ul id="array"></ul>
	
	
	<!-- Button to send to server -->
	<button id="sendButton"> Send to Server! </button>
	
</html>

<script>
	
	var courses = [];
	
	// Add course, input and validate first
	$( "#appendToArray" ).click(function() {
	
		var text = $("#exampleTextBox").val();

		// Validate and input text
		if (validate(text)) {
			courses.push(JSON.parse(toJSON(text)));
			
			// Update display
			var trimText = text.trim();
			$( "#array" ).append('<li>'+trimText+'</li>');
		}
		else {
			// TODO: needs to be some other form of notification?
			alert("Input text invalid.");
		}
		
		
		
	});
	
	var validate = function (text) {
		return text.match(/^\s*([A-Za-z]+)\s+([A-Za-z0-9]+)\s*$/g);
	};
	
	// Converts text from "subject id" to JSON
	var toJSON = function (text) {
		var subject = /^\s*([A-Za-z]+)\s+([A-Za-z0-9]+)\s*$/g.exec(text)[1];
		var id = /^\s*([A-Za-z]+)\s+([A-Za-z0-9]+)\s*$/g.exec(text)[2];
		
		return '{"subject":"' + subject + '","id":"' + id + '"}';
	}
	
	// TODO: Send JSON to server
	$( "#sendButton" ).click(function() {
		
		
		var sendString = JSON.stringify(courses);
		// Change the brackets [] on the end to {} for JSON format
		sendString = sendString.substr(1, sendString.length-2);
		sendString = '{' + sendString + '}';
		
		alert("Sending to server: " + sendString);
		//$.post(<URL>, sendString, <function?>);
		
	});
	
	
	
</script>